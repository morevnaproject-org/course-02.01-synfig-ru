Onionskin

Если мы немного промахнулись с промежутками, то мы можем их легко поправить, передвинув ключевые кадры. Вот так.

Смотрим что получилось. Ну вот, теперь он у нас говорит.

Я буду выбирать последовательность голов в произвольном порядке, уверен, что это не будет сильно заметно. Не забывайте также, что можно дублировать существующие фиксаторы.

Теперь в этом и в этом промежутке будем переключать слои. Включаем режим анимации, перейдем на два кадра вперед и переключим слой. Теперь ещё немного вперёд… И так далее.

Так, первая заканчивается где-то здесь. А вторая начинается тут… А заканчивается… Вот здесь.

Итак, у нас есть две фразы. Давайте обозначим ключевыми кадрами начало и конец каждой фразы.

Прослушаем звуковую дорожку.

Но перед тем как приступить к анимации, давайте импортируем аудио файл - это будет голос нашего персонажа. Выбираем “Файл” > “Импортировать” и в папке с персонажем выбираем “sound.wav”.

Звуковой слой

Если мы будем изменять этот параметр в режиме анимации, то у нас будут появляться фиксаторы и слои будут переключаться.

Группа-преключатель действует точно так же, как и обычная группа, но она отображает только один из дочерних слоёв. У этой группы есть специальный параметр «Имя активного слоя» (Active Layer Name) - он указывает какой именно слой должен быть виден. Давайте попробуем его изменить, чтобы персонаж у нас был с закрытым ртом. Нажмём Enter. Готово.

Но мы сделаем немного по-другому. Мы будем использовать специальную группу-переключатель. Выделяем их все, щёлкаем правой копкой и выбираем «Сгруппировать в переключатель» (Group Layers into Switch).

Теперь нужно сделать так, чтобы был виден только один вариант головы, а все остальные варианты нужно скрыть. Это можно сделать с помощью параметра «Величина», который задаёт прозрачность слоя.

Параметр прозрачности слоя

Итак, нам нужно импортировать все изображения голов. Выбираем вот эти файлы — с номерами от нуля до четырёх.

Группа-переключатель

Давайте создадим новый файл и снова быстро соберем персонажа.

В папке с персонажем у меня есть несколько подготовленных голов. Когда я переключаю их с определенной частотой, то создается иллюзия, что персонаж говорит. Именно так мы и будем делать.

Теперь, когда наш персонаж может двигаться, осталось научить его говорить.

А теперь привяжем группу. Вот так, готово.

Да-да, мы точно так же удаляли анимацию, не обращайте внимания.

Сначала давайте отвяжем части внутри группы от скелета. Выделим нужную часть, находим параметр «Трансформация» (Transformation), щёлкаем правой кнопкой и выбираем «Отсоединить» (Disconnect).

Отвязывание от костей

Да, именно так - мы можем привязывать к скелету не только слои изображений, но и группы. Хотя, вы наверное уже догадались, что слой изображения это на самом деле тоже группа (точнее — группа-переключатель). А сам слой изображения находится внутри. Но, не будем отвлекаться.

Структура слоя изображения

Но мы сейчас сделаем по-другому. Я хочу показать, что мы можем привязывать к скелету не только отдельные части но и группы целиком. Предположим, что нам не нужно чтобы персонаж сгибал руку в локте и запястье. Тогда нам для руки достаточно одной кости и мы можем привязать к ней всю группу.

Чтобы исправить ситуацию нужно вытащить части из группы и подогнать их к скелету заново.

Если бы группа была не трансформирована, то всё было бы в порядке — она бы нам не мешала.

Теперь пробуем изменить позу. Как видите, с туловищем и головой всё в порядке, а вот с руками происходит что-то невообразимое. Всё это происходит из-за трансформированной группы.

Вот так, привязали туловище, голову и части руки.

Попробуем создать скелет.

Предположим мы захотели собрать руку вот таким образом — собрали её вот тут, потом сгруппировали, переместили, да ещё и повернули. Как вы понимаете, после этого все части руки будут находиться в другой системе координат, так как мы их трансформировали.

Вот, давайте соберём нашего персонажа, но возьмём только туловище, голову и одну руку.

Давайте сохраним и закроем этот файл и я вам покажу ещё один пример по поводу скелета и системы координат.

Если мы будем создавать скелет за пределами группы, то координаты костей не будут совпадать с координатами объектов. Когда вы будете привязывать вы ничего не заметите, но вот когда попробуете изменить положение костей — тут начнутся чудеса.

И, наконец, ещё одно очень важное замечание. Все части нашего персонажа располагаются внутри группы, которую мы уменьшили в самом начале. Когда я создавал слой скелета, то я поместил его внутрь этой группы. Это очень важно, потому что скелет и части, которые мы привязываем, должны находиться в одной системе координат.

Скелет и система координат

После того как вы привязали слой к кости это не значит что мы должны его двигать только костями. Нет, мы можем двигать его самостоятельно, просто он будет двигаться относительно той кости, к которой привязан. Это очень удобно во время анимации,если нам вдруг нужно что-то подправить. Главное не запутаться!

Менять части после привязки

Обратите внимание, что когда я тяну за кончик кости, то кость автоматически растягивает изображение в нужном направлении. Это очень удобно. Хотя, бывают случаи, когда это не совсем желательно. Например, в случае с головой. Если мы хотим наклонить её, то нам совсем не нужно чтобы она растягивалась. Именно для этого каждая кость имеет вот эту синюю точку. Она позволяет менять угол кости, не меняя её длины. Вот так.

Итак, персонаж готов, попробуем подвигать его.

Управление костями

Если мы случайно привяжем какую-то часть не к той кости, то просто привяжите её к другой, - она отвяжется от предыдущей автоматически.

Таким же образом привязываем остальные части к скелету.

Чтобы привязать туловище к скелету нам нужно выделить его слой и скелет. Щёлкаем на туловище, потом удерживая CTRL щёлкаем на скелет (в списке слоёв). Теперь щелчком левой кнопкой мыши выделяем главную точку на контроллере, так мы указываем программе что именно хотим привязать. А теперь скажем укажем куда привязывать - правой кнопкой нажимаем на кость и выбираем «Привязать к кости» (Link to bone). Ну вот все работает, туловище привязано.

Нам нужно привязать все части к скелету.

Ну вот, скелет готов. Пока что он никак не влияет на части и двигается сам по себе.

Привязка к костям

Кости для ног создаем из первой, так как при наклоне туловища ноги должны оставаться на месте. Далее создаем кость для нижней части ноги и для ступни. И для второй ноги делаем кости по анологии.

Руки и голова будут подчиняться туловищу, создадим кости для них из этой кости. Щёлкаем на ней правой кнопкой, вбираем «Создать дочернюю кость» (Create child bone). Теперь из этой кости мы создаем кость для нижней части руки, и из неё кость для ладони. То же самое и для второй руки.

Вторая кость отвечает за туловище — ставим её сюда.

Итак, давайте установим первую кость, советую делать все точно так же как у меня. Она будет отвечать за положение всего персонажа.

Структура костей персонажа

Вот, появилась вторая кость. Первая кость является главной по отношению к ней. Смотрите, когда я двигаю первую кость, то она тянет за собой вторую. Но при этом вторая может двигаться сама по себе. Так работает иерархия костей.

Иерархия костей

Давайте создадим ещё одну кость, которая будет подчиняться той, которая у нас уже есть. Щелкнем правой кнопкой по любой точке этой кости и выбираем «Создать дочернюю кость» (Create child bone).

Добавление костей

Вот, появился слой скелета, в котором уже есть одна кость. Вот она. Зелёная точка — это основание кости. А коричневая определяет её угол и длину.

А теперь добавим слой скелета. Этот слой должен находиться внутри группы, поверх всех частей персонажа, поэтому мы раскрываем группу, здесь выделяем первый слой, щёлкаем по нему правой кнопкой мыши, выбираем «Создать слой» (New Layer) - «Прочие» (Other) - «Скелет» (Skeleton).
