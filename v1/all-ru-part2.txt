Мы можем передвигать фиксаторы и таким образом менять скорость движения Васи. Давайте, например, передвинем этот фиксатор (с кадра номер 96) вот сюда (на кадр 70). Ага, теперь в магазин Вася бежит гораздо охотнее, а вот домой уже как-то не очень. Видимо плохую отметку в школе получил.

Также мы можем перейти к существующему фиксатору [на кадре 48] и изменить его значение. Давайте, например чуть-чуть подправим позицию Васи. Вот так. Как видим, анимация автоматически обновилась.

Управление фиксаторами

Давайте продолжим нашу анимацию - на 96 кадре переместим Васю в магазин, а на 115 обратно домой.

Сейчас наша анимация очень простая и Synfig легко справляется с её воспроизведением. Но если анимация более сложная, то воспроизвести её в реальном времени обычно не получается. Поэтому рекомендуется пользоваться диалогом предпросмотра. Жмём вот на эту кнопку. В появившемся диалоге поставим качество равным 1 и посмотрим что получилось.

Окно предпросмотра

Фиксаторы появляются когда мы меняем значения параметров в режиме анимации. Вот здесь у нас зафиксирована позиция, что Вася в школе, а на нулевом кадре Вася дома. Обратите внимание, что движение между ними программа вычисляет автоматически (воспроизводим анимацию).

Давайте вернёмся на нулевой кадр. Василий у нас дома, здесь всё в порядке. Теперь перейдём на 48-й кадр. Передвинем Васю в школу. Смотрите, напротив параметра, который мы изменяли — в нашем случае это “Трансформация” - появились два маленьких жёлтых ромбика. Они фиксируют значения параметра для определённых моментов времени, поэтому мы их будем называть фиксаторами.

Фиксаторы

Посмотрите на панель «Шкала кадров» внизу. Сейчас мы находимся в самом начале, на нулевом кадре (показать поле с номером текущего кадра). Мы можем менять текущую позицию на шкале кадров, щёлкая на серой области с отметками времени.

Шкала кадров

Когда вы находитесь в режиме анимации, все изменения, которые вы делаете, записываются в привязке к текущему времени на шкале кадров.

Нам нужно перейти в режим анимации и задать эти два положения. Чтобы включить режим анимации щёлкните на вот эту кнопку. “Человечек” становится красным и вокруг рабочей области появится красная рамка — это значит, что режим анимации включён.

Итак, мы хотим сделать анимацию, в которой мальчик Вася идёт из дома в школу. Очевидно, что в один момент времени Вася будет дома, а в какой-то другой момент — в школе.

Режим анимации

Ну вот, теперь у нас всё готово для анимации.

Теперь давайте вставим изображение мальчика Васи — это файл «boy.png».

Точно также как у группы, у слоя изображения, есть точки за которые мы можем изменять его положение размер и прочее. Давайте уменьшим слой изображения, чтобы оно поместилось на экране. Ну вот, готово.

Всё, что находится за пределами кадра срезается, но мы видим рамку, которая обозначает границы текущего слоя. Видите, какой он большой.

Кстати, вы можете приближать и отдалять текущий вид, зажав CTRL и прокручивая колесо мыши, вот так. А если удерживать нажатым колесо мыши (как кнопку) можно перемещаться по рабочей области.

Навигация (Ctrl+колесо)

Вот у нас появился слой с изображением, давайте выделим его. Но здесь явно что-то не так. Картинка слишком большая и её размеры выходят за пределы кадра.

Давайте теперь вставим изображение карты в синфиг. Из меню “Файл” выбираем пункт “Импортировать”. Далее находим папку куда вы распаковали архив с примерами. Заходим в папку «first-animation» и выбираем файл “background.png”.

Импорт изображений

Обратите внимание, что все изображения сохранены в формате PNG. Мы всегда будем использовать этот формат, потому что он поддерживает сжатие без потери качества, и позволяет сохранять изображения с прозрачным фоном.

Формат PNG

Итак, давайте заглянем в папку «first-animation». Вот у нас картинка мальчика Васи, а это изображение карты, по которой он будет путешествовать. Также здесь есть ещё несколько файлов, они нам понадобятся чуть позже.

Специально для этого курса мы подготовили файлы, которые будем использовать для упражнений в процессе обучения. Скачайте приложенный файл архива, который называется «workshop.zip» и распакуйте его.

Файлы примеров

А теперь давайте сделаем простую анимацию про мальчика Васю, который идёт в школу. Самый простой способ делать анимацию в синфиге — это использовать уже готовые изображения.

Ваша первая анимация

Итак, все настройки остаются такими же, как при визуализации одного кадра, за исключением строки “Рендерить только текущий кадр”, здесь следует убрать галочку. Далее выбираем “Визуализация” и ждем, когда программа закончит рендеринг. Вот у нас получилась последовательность изображений с нашей анимацией, теперь мы можем вставлять их в другую программу.

В этом случае рендеринг выполняется как последовательность изображений в формате png. В этом режиме также не происходит потери качества, поэтому это хороший вариант, если ваша программа для монтажа не поддерживает формат H264, который мы рассмотрели в самом начале.

И, наконец, я покажу ещё один вариант рендеринга, который очень часто применяют профессионалы, когда им необходимо отрендерить анимацию, сохранив при этом прозрачный фон. Это позволяет совмещать вашу анимацию с другими видеоклипами и эффектами в программах видеомонтажа и композинга.

Рендеринг PNG-секвенций

Предположим теперь мы хотим отрендерить текущий кадр как изображение в формате png. Для этого меняем разрешение на “png”, затем выбираем модуль вывода “Автоматически”. Далее ставим галочку “Рендерить только текущий кадр”. Готово, смотрим что у нас получилось.

Одна картинка

Чтобы отрендерить наш проект как gif-анимацию нужно в строке “Имя файла” указать расширение “gif” и выбрать модуль вывода “magick++”. В назначенной папке смотрим что получилось.

Рендеринг в GIF

Итак все готово, выбираем “Визуализация” и ждем пока вот здесь не появится сообщение: “Файл успешно визуализирован”. И если вы все сделали правильно, то в назначенной папке появится ваш файл.

Ниже вы можете задать размер изображения — ширину, высоту и т.д. На вкладке “Время” можно указать диапазон кадров анимации который вы хотите отрендерить.

Но возможно, вы захотите выбрать другой кодек. Тогда нужно дополнительно выполнить следующие действия. В строке “Цель” выберите пункт “ffmpeg”, после чего станет активной кнопка “Параметры”. Нажмём на нее - появится вот такой диалог, из которого можно выбрать подходящий кодек и также битрейт. В данном случае нас вполне устроит вариант по-умолчанию, поэтому ничего менять не будем.

В принципе, этого достаточно — по-умолчанию синфиг закодирует вашу анимацию кодеком H.264, применив сжатие без потерь. Этот формат прекрасно подходит если вы хотите потом вставить отрендереную анимацию в видеоредактор, для того чтобы сшить сцены вместе и наложить звук.

Давайте сделаем визуализацию нашей анимации в формате “avi”. Для этого в строке “имя файла” напишем название нашего ролика - “Vasya”, а после точки укажем формат видео — “avi”. Также нажав на кнопку “Выбрать” можно задать путь для файла.

Рендеринг в avi

Чтобы запустить рендеринг, щёлкнем вот на эту кнопку, после чего откроется диалог “параметры визуализации”.

Рендеринг — это визуализация (конвертирование) готовой анимации в формат видео ролика или серии изображений.

Итак, наша первая анимация готова, конечно она очень простая, но то ли ещё будет! Теперь, нам нужно сделать рендеринг нашего проекта.

Рендеринг

Итак, сборка завершена, теперь мы можем переходить к анимации.

Давайте теперь для порядка назовём эту группу «boy» (то есть «мальчик»), а вот эту — «body» (туловище).

Теперь давайте сделаем так чтобы наш персонаж мог наклонять тело влево и вправо. Если переместить контроллер для туловища, то после вращения голова и руки остаются на прежних местах. Разумеется нам нужно чтобы они двигались вместе. Это очень просто сделать — давайте сгруппируем руки, голову и туловище вместе. Теперь передвинем центр вращения. Ну вот, всё работает. (Подвигать туловище, подвигать руки).

Иерархия групп

Давайте теперь настроим центры вращения для оставшихся частей.

Ага, наверное лучше будет немного поменять порядок слоёв. Вот так.

Давайте попробуем теперь его подвигать. Например, поднять руку. Ага, видите, она у нас сразу оторвалась, приходится вручную подставлять её на место. Чтобы этого не происходило давайте изменим центр её вращения. Щёлкаем на точке, которая отвечает за перемещение слоя. Теперь удерживаем нажатой клавишу Ctrl и двигаем. Вот сюда. Ну вот, теперь у нас центр на месте и руку очень удобно двигать.
