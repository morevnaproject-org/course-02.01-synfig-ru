Тема:  Связывание файлов

Давайте снова откроем файл шагающим персонажем, над которым мы работали на предыдущих уроках. Этот файл с готовой анимацией вы можете найти в папке с примерами, вот здесь — заходим в «character-2» - «final». 

Вот он.

Теперь мы можем добавить фон и сделать вот такую сцену.

Зайдём в папку «bg-forest-1». Вот файл с фоном.

Если мы вставим фон прямо в нашу анимацию с персонажем, то нам очень будут мешать эти ключевые кадры, которые отвечают за анимацию персонажа. 

Поэтому, мы поступим по-другому.

Закроем этот файл, изменения сохранять не будем.

== Импорт файлов анимации ==

Создадим новый файл и вставим туда наш файл с анимацией персонажа. 

Выбираем «Файл» (File) - «Импортировать» (Import). Делаем всё точно так же как, когда мы вставляем изображение. Идём в «character-2» - «final». Вот он.

Вот, мы импортировали файл с анимацией и он отображается в виде группы. Теперь мы можем анимировать его, как простой объект.

При этом, ключевые кадры в текущем документе не будут влиять на анимацию в импортированном файле. Смотрите.

Вот, напротив параметра Canvas отображаются фиксаторы импортированного файла. И они остаются на месте когда я двигаю ключевые кадры в текущем документе.

Таким образом, все ключевые кадры, которые отвечают за анимацию частей тела персонажа, остаются изолированными во внешнем файле и больше нам не мешают. 

Этот приём может быть использован когда нам нужно анимировать несколько независимых персонажей в одной сцене — просто разместите каждый персонаж в отдельном файле со своим набором ключевых кадров.

То есть, мы имеем две анимации с разной структурой кадров и они изолированы друг от друга потому что располагаются в разных файлах.

[анимировать персонажа как он идёт]

Ну вот, теперь нам осталось добавим фон. Главное не забыть выключить режим анимации.

[добавить фон и показать как персонаж идёт]

== Связанные файлы ==

(ИНФОГРАФИКА)

Обратите внимание, что когда мы вставляем файл с анимацией, то на самом деле вставляется не сам файл а ссылка на него. То есть, если исходный файл изменяется, то изменения автоматически появятся во всех файлах, которые его используют. 

Сейчас, если мы попробуем открыть группу и что-то изменить в импортированном файле, то у нас это не получится. Это потому, что содержимое группы находится во внешнем файле.

Но мы можем открыть наш файл с персонажем отдельно...

[открывает файл]

...и тогда у нас будет возможность что-то изменить. 

И все изменения автоматически отображаются вот здесь. 

[показать на вкладке с родительским файлом]

И если импортированный файл у нас открыт на отдельной вкладке, то теперь мы можем его редактировать прямо из этого документа. Вот, никаких ошибок не появляется.

Главное не забывать, что при нажатии кнопки «Сохранить» (Save) будут сохранены изменения только в текущем файле, а тот файл (который с персонажем) нужно сохранять отдельно. Именно поэтому на панели есть кнопка «Сохранить все» (Save all) — она сохраняет все открытые файлы.

== Связанные файлы (изображения) ==

Если уж мы заговорили о связанных файлах, то здесь я хочу сказать несколько слов про импорт файлов изображений. 

Точно также, как с импортом файлов анимации, когда мы импортируем изображение, то в файле анимации сохраняется не сама картинка, а лишь ссылка на неё. Если отредактировать файл изображения, то оно изменится и в файле анимации.

Только в данном случае необходимо закрыть и открыть программу заново, чтобы увидеть изменения.

И ещё одна вещь, которую нужно знать, работая со связанными файлами. Если вы хотите переместить свой файл анимации на другой компьютер, то нужно вместе с ним переместит все файлы, на которые он ссылается. Для слоёв изображений мы можем посмотреть путь к файлу вот здесь, вот в этом параметре. Здесь же мы можем внести изменения в путь к файлу, если нам это понадобится.
